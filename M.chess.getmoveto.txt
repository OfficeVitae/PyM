; getMoveTo() return the row and column where to move piece #pieceindex of type #piecetypeindex to
; NOTE does not need to know the current player as it uses #validmoves
$=?
validpiecemoves=validmoves(pieceindex) ; NOTE the row and column of the moves appear in successive elements
out("Possible moves: ",validpiecemoves) ; testing
numberofpiecemoves=len(validpiecemoves)
if(numberofpiecemoves==1,return(validpiecemoves(1))) ; if only a single move possible, that's it!!
; let user choose any of the possible destinations by index
piecemoveindices='' ; collecting the indices to pass to inch()
; count over the even indices (which are the columns)
(piecemoves=l(),piecemovecharacters='',for(piecemoveindex,1..numberofpiecemoves
   ,pmc=movecharacters(piecemoveindex),piecemovecharacters+=pmc,piecemoves.=l(l(validpiecemoves(piecemoveindex,1),validpiecemoves(piecemoveindex,2),pmc))))
showBoard(piecemoves,piececolor) ; show the board with the possible end positions marked
(out("Enter the new position number of your ",piecetypenames(piecetypeindex)," [",piecemovecharacters,"]? "),piecemoveindex=inch(piecemovecharacters),out(lf))
if(piecemoveindex>0,$=validpiecemoves(piecemoveindex))